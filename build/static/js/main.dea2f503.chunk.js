(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{107:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(21),o=n.n(a),i=(n(59),n(60),n(12)),s=n(6),u=n(16),l=n(23),j=n(47),b=n.n(j),d=n(1);var f=function(t){var e=t.children;return Object(d.jsx)("div",{className:b.a.container,children:e})},h=n(48),O=n.n(h),p=n(15),g=n(24),v=n.n(g),x=function(){return Object(d.jsxs)("nav",{className:v.a.nav,children:[Object(d.jsx)(p.c,{exact:!0,to:"/",className:v.a.link,activeClassName:v.a.activeLink,children:"Phonebook"}),Object(d.jsx)(p.c,{to:"/contacts",className:v.a.link,activeClassName:v.a.activeLink,children:"Contacts"})]})},m=n(25),k=n.n(m),_=function(){return Object(d.jsxs)("div",{className:k.a.wrap,children:[Object(d.jsx)(p.c,{to:"/register",exact:!0,className:k.a.link,activeClassName:k.a.activeLink,children:"Registration"}),Object(d.jsx)(p.c,{to:"/login",exact:!0,className:k.a.link,activeClassName:k.a.activeLink,children:"Login"})]})},w=n(33),y=n.n(w),L=n(19),N=function(){var t=Object(i.c)(L.a.getUsername),e=Object(i.b)();return Object(d.jsxs)("div",{className:y.a.container,children:[Object(d.jsxs)("p",{className:y.a.name,children:["Welcome, ",t]}),Object(d.jsx)("button",{className:y.a.btn,type:"button",onClick:function(){return e(u.a.logOut())},children:"Logout"})]})},I=function(){var t=Object(i.c)(L.a.getIsLoggedIn);return Object(d.jsxs)("header",{className:O.a.header,children:[Object(d.jsx)(x,{}),t?Object(d.jsx)(N,{}):Object(d.jsx)(_,{})]})},C=n(22),B=n(31),S=["children","redirectTo"];function T(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/":n,c=Object(B.a)(t,S),a=Object(i.c)(L.a.getIsLoggedIn);return Object(d.jsx)(s.b,Object(C.a)(Object(C.a)({},c),{},{children:a?e:Object(d.jsx)(s.a,{to:r})}))}var z=["children","restricted","redirectTo"];function A(t){var e=t.children,n=t.restricted,r=void 0!==n&&n,c=t.redirectTo,a=void 0===c?"/":c,o=Object(B.a)(t,z),u=Object(i.c)(L.a.getIsLoggedIn)&&r;return Object(d.jsx)(s.b,Object(C.a)(Object(C.a)({},o),{},{children:u?Object(d.jsx)(s.a,{to:a}):e}))}var R=n(50),U=n.n(R),W=Object(r.lazy)((function(){return n.e(7).then(n.bind(null,276))})),F=Object(r.lazy)((function(){return Promise.all([n.e(8),n.e(4)]).then(n.bind(null,275))})),V=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,277))})),E=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,278))}));var P,q,J,K,M=function(){var t=Object(i.b)();return Object(r.useEffect)((function(){t(u.a.fetchCurrentUser())}),[t]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(f,{children:[Object(d.jsx)(I,{}),Object(d.jsx)(s.d,{children:Object(d.jsxs)(r.Suspense,{fallback:Object(d.jsx)(U.a,{type:"TailSpin",color:"#00BFFF",height:80,width:80,position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}),children:[Object(d.jsx)(A,{exact:!0,path:"/",children:Object(d.jsx)(W,{})}),Object(d.jsx)(A,{exact:!0,path:"/register",restricted:!0,children:Object(d.jsx)(V,{})}),Object(d.jsx)(A,{exact:!0,path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(d.jsx)(E,{})}),Object(d.jsx)(T,{path:"/contacts",redirectTo:"/login",children:Object(d.jsx)(F,{})})]})})]}),Object(d.jsx)(l.a,{})]})},Q=n(29),Y=n(3),D=n(18),G=n(51),H=n.n(G),X=n(5),Z=n(7),$=n(8),tt=Object(Y.d)([],(P={},Object(X.a)(P,Z.j,(function(t,e){return e.payload})),Object(X.a)(P,Z.c,(function(t,e){var n=e.payload;return[].concat(Object(Q.a)(t),[n])})),Object(X.a)(P,Z.g,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),P)),et=Object(Y.d)(!1,(q={},Object(X.a)(q,Z.i,(function(){return!0})),Object(X.a)(q,Z.j,(function(){return!1})),Object(X.a)(q,Z.h,(function(){return!1})),Object(X.a)(q,Z.b,(function(){return!0})),Object(X.a)(q,Z.c,(function(){return!1})),Object(X.a)(q,Z.a,(function(){return!1})),Object(X.a)(q,Z.f,(function(){return!0})),Object(X.a)(q,Z.g,(function(){return!1})),Object(X.a)(q,Z.e,(function(){return!1})),q)),nt=Object(Y.d)("",Object(X.a)({},Z.d,(function(t,e){return e.payload}))),rt=Object(Y.d)(null,(J={},Object(X.a)(J,Z.h,(function(t,e){return e.payload})),Object(X.a)(J,Z.e,(function(t,e){return e.payload})),Object(X.a)(J,Z.a,(function(t,e){return e.payload})),J)),ct=Object($.b)({items:tt,filter:nt,loading:et,error:rt}),at=Object(Y.e)({name:"auth",initialState:{user:{name:null,email:null,password:null},token:null,isLoggedIn:!1,error:null},extraReducers:(K={},Object(X.a)(K,u.a.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(X.a)(K,u.a.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(X.a)(K,u.a.logOut.fulfilled,(function(t,e){t.user={name:null,email:null,password:null},t.token=null,t.isLoggedIn=!1})),Object(X.a)(K,u.a.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0})),K)}).reducer,ot=Object(Q.a)(Object(Y.f)({serializableCheck:{ignoredActions:[D.a,D.f,D.b,D.c,D.d,D.e]}})),it={key:"auth",storage:H.a,whitelist:["token"]},st=Object(Y.a)({reducer:{auth:Object(D.g)(it,at),contacts:ct},middleware:ot}),ut=Object(D.h)(st),lt=(n(106),n(52));o.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(i.a,{store:st,children:Object(d.jsx)(lt.a,{loading:null,persistor:ut,children:Object(d.jsx)(p.a,{children:Object(d.jsx)(M,{})})})})}),document.getElementById("root"))},16:function(t,e,n){"use strict";var r=n(17),c=n.n(r),a=n(26),o=n(20),i=n.n(o),s=n(3),u=n(23);n(53);i.a.defaults.baseURL="https://connections-api.herokuapp.com";var l=function(t){i.a.defaults.headers.common.Authorization="Bearer ".concat(t)},j=function(){i.a.defaults.headers.common.Authorization=""},b=Object(s.c)("auth/register",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,i.a.post("/users/signup",e);case 4:return a=t.sent,o=a.data,l(o.token),t.abrupt("return",o);case 10:throw t.prev=10,t.t0=t.catch(1),400===t.t0.response.status&&u.b.error("This user is already exist"),500===t.t0.response.status&&u.b.error("Something went wrong. Try another time"),r(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),d=Object(s.c)("auth/login",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,i.a.post("/users/login",e);case 4:return a=t.sent,o=a.data,l(o.token),t.abrupt("return",o);case 10:throw t.prev=10,t.t0=t.catch(1),400===t.t0.response.status&&u.b.error("Incorrect password or login"),r(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),f={register:b,logOut:Object(s.c)("auth/logout",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,i.a.post("/users/logout");case 4:j(),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(1),r(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),logIn:d,fetchCurrentUser:Object(s.c)("auth/refresh",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,o,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return l(a),t.prev=5,t.next=8,i.a.get("/users/current");case 8:return o=t.sent,s=o.data,t.abrupt("return",s);case 13:throw t.prev=13,t.t0=t.catch(5),n.rejectWithValue(t.t0.message);case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}())};e.a=f},19:function(t,e,n){"use strict";var r={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUsername:function(t){return t.auth.user.name}};e.a=r},24:function(t,e,n){t.exports={nav:"Navigation_nav__INfuO",link:"Navigation_link__12o2K",activeLink:"Navigation_activeLink__2rUFB"}},25:function(t,e,n){t.exports={wrap:"AuthNav_wrap__k-8BI",link:"AuthNav_link__2ejsg",activeLink:"AuthNav_activeLink__3huQJ"}},33:function(t,e,n){t.exports={container:"LogoutBtn_container__2ezfP",name:"LogoutBtn_name__3VAk0",btn:"LogoutBtn_btn__Wshmm"}},47:function(t,e,n){t.exports={container:"Container_container__3RIox"}},48:function(t,e,n){t.exports={header:"AppBar_header__1Yk8v"}},59:function(t,e,n){},7:function(t,e,n){"use strict";n.d(e,"i",(function(){return c})),n.d(e,"j",(function(){return a})),n.d(e,"h",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return j})),n.d(e,"e",(function(){return b})),n.d(e,"d",(function(){return d}));var r=n(3),c=Object(r.b)("contacts/fetchContactRequest"),a=Object(r.b)("contacts/fetchContactSuccess"),o=Object(r.b)("contacts/fetchContactError"),i=Object(r.b)("contacts/addContactRequest"),s=Object(r.b)("contacts/addContactSuccess"),u=Object(r.b)("contacts/addContactError"),l=Object(r.b)("contacts/deleteContactRequest"),j=Object(r.b)("contacts/deleteContactSuccess"),b=Object(r.b)("contacts/deleteContactError"),d=Object(r.b)("contacts/changeFilter")}},[[107,2,3]]]);
//# sourceMappingURL=main.dea2f503.chunk.js.map